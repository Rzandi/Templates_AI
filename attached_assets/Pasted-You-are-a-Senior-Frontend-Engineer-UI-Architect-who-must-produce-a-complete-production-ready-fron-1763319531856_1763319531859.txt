You are a Senior Frontend Engineer & UI Architect who must produce a complete, production-ready frontend codebase using only:

HTML (static files)

CSS (vanilla)

JavaScript (vanilla, ES Modules, no bundler)

Your job: generate a single-page application (SPA) using a hash-based router (e.g. #/products, #/invoices) that is componentized, modular, and fully runnable by copying files into a public/ folder and opening index.html. The app will connect to a simple Node backend (separate prompt) through REST fetch calls.

âœ… TECH STACK & CONSTRAINTS (MANDATORY)

Vanilla HTML, CSS, JavaScript (ES2022 modules) only.

No React / Vue / Svelte / Tailwind / build tools. Use plain files.

Single index.html as SPA shell (hash routing). Additional HTML fragments (partials) allowed under public/pages/ or loaded via JS templates.

CSS must be modular (BEM or utility conventions), responsive, and support Dark mode toggling persisted in localStorage.

JS must be modular (ES module files), strictly typed-style comments (JSDoc), avoid globals except a single app namespace if necessary.

Use fetch() for all API calls; implement a minimal retry & global error handler.

Local state: localStorage for auth token (if applicable), cart, theme.

Accessibility: semantic HTML, alt attributes, keyboard focus for interactive UI, aria labels where appropriate.

Animations: CSS transitions + small JS micro-interactions (no external animation libs).

Performance: lazy-load page modules (dynamic import()), minimal DOM updates, and virtualized list if needed for long lists.

ğŸ“ REQUIRED PROJECT STRUCTURE (MUST MATCH)
public/
 â”œâ”€ index.html
 â”œâ”€ app/
 â”‚   â”œâ”€ main.js           // bootstrap + router
 â”‚   â”œâ”€ router.js         // hash router
 â”‚   â”œâ”€ store.js          // app-wide stores (auth, cart, theme)
 â”‚   â”œâ”€ api/
 â”‚   â”‚   â”œâ”€ api.js        // fetch wrapper, interceptors
 â”‚   â”‚   â”œâ”€ products.js
 â”‚   â”‚   â”œâ”€ orders.js
 â”‚   â”‚   â””â”€ invoices.js
 â”‚   â”œâ”€ views/
 â”‚   â”‚   â”œâ”€ home.js
 â”‚   â”‚   â”œâ”€ products.js
 â”‚   â”‚   â”œâ”€ productDetail.js
 â”‚   â”‚   â”œâ”€ cart.js
 â”‚   â”‚   â”œâ”€ checkout.js
 â”‚   â”‚   â”œâ”€ invoices.js
 â”‚   â”‚   â””â”€ invoiceViewer.js
 â”‚   â”œâ”€ components/
 â”‚   â”‚   â”œâ”€ header.js
 â”‚   â”‚   â”œâ”€ footer.js
 â”‚   â”‚   â”œâ”€ sidebar.js
 â”‚   â”‚   â”œâ”€ productCard.js
 â”‚   â”‚   â”œâ”€ modal.js
 â”‚   â”‚   â””â”€ toast.js
 â”‚   â”œâ”€ templates/
 â”‚   â”‚   â””â”€ productCard.html
 â”‚   â””â”€ utils/
 â”‚       â”œâ”€ debounce.js
 â”‚       â”œâ”€ format.js
 â”‚       â””â”€ storage.js
 â”œâ”€ css/
 â”‚   â”œâ”€ base.css
 â”‚   â”œâ”€ layout.css
 â”‚   â””â”€ components.css
 â”œâ”€ assets/
 â”‚   â””â”€ images/
 â””â”€ data/
     â””â”€ mock/              // optional dev mock JSON


AI must produce the full file list with exact file paths and full content for each file required to run the SPA.

ğŸ§­ PAGES / VIEWS (all must be implemented)

#/ â€” Home/Landing (hero inspired by MagicUI; marketing block)

#/products â€” Product Catalog (grid, filters, search, pagination)

#/products/:id â€” Product Detail (modal or route)

#/cart â€” Cart drawer/page (localStorage, edit qty, remove)

#/checkout â€” Checkout flow (customer form, summary, place order)

#/invoices â€” Invoice List (fetch from backend)

#/invoices/:id â€” Invoice Viewer (opens server-provided invoice HTML in iframe or new tab)

Auth pages optional but if present must be simple forms and store token in localStorage.

ğŸ§© COMPONENTS (must be provided)

Header (brand, nav, search, cart count)

Footer (links, copyright)

ProductCard (uses templates/productCard.html partial)

Modal (reusable)

Toast/Notification system (global)

Cart drawer component

Loading skeleton component

All components must be written as ES modules that export an init/render function and clean up after unmount.

ğŸ›  API LAYER (services/*.js)

Implement api/api.js (fetch wrapper) with:

Base URL configurable via window.__API_BASE__ or meta tag.

Request interceptor to attach token.

Response handler that maps { success, data, message }.

Automatic JSON parse and 401 handling (clear token & redirect to login).
Implement domain services: products.js, orders.js, invoices.js with functions used by views.

ğŸ”’ State & Persistence

store.js must expose minimal pub/sub for: auth, cart, theme.

Cart persisted to localStorage under key ff_cart_v1.

Theme persisted under ff_theme_v1.

Expose simple API: store.subscribe(key, cb), store.get(key), store.set(key, value).

ğŸ§¾ Checkout Flow & Invoice

Checkout form posts to backend endpoint /api/orders returning { success, data: { order, invoiceUrl } }.

After successful checkout, open invoiceUrl in new tab (backend returns server-side rendered invoice).

Provide client-side PDF print button in invoice viewer by calling window.print() inside iframe/new tab.

ğŸ¨ Design References & Mapping

Map UI parts to references:

MagicUI â€” hero sections and animated marketing blocks (use CSS and small JS animation).

21st.dev â€” spacing system, cards, readable layout; adopt spacing tokens in CSS.

ReactBits â€” micro-interactions (button hover/pulse, card elevation on hover).
Document where each reference influences file/style (short mapping comment at top of base.css).

ğŸ§ª Dev Mode & Mock Data

Include optional public/data/mock/products.json for local dev. The app should gracefully fallback to mock file if API fails (detect via network error).

ğŸ“¦ Deliverables (strict)

AI must output all of the following in code blocks with file path headers before each block:

public/index.html (SPA shell, meta tags, script module include, global config)

All JS modules under public/app/ listed above (full implementations)

All CSS files under public/css/ (base, layout, components)

public/templates/productCard.html partial

Example image placeholders references in public/assets/images/ (or URLs)

public/data/mock/products.json (sample 8â€“12 products)

README section with run instructions (how to host static files on simple server or via the Node backend prompt)

Short comment block in top of main.js describing how routing works (hash router) and how to extend

NO placeholders â€” all code must be runnable and complete.